import { isRouterContext } from "./util.ts";
export function getQuery(ctx, { mergeParams, asMap } = {}) {
    const result = {};
    if (mergeParams && isRouterContext(ctx)) {
        Object.assign(result, ctx.params);
    }
    for (const [key, value] of ctx.request.url.searchParams) {
        result[key] = value;
    }
    return asMap ? new Map(Object.entries(result)) : result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImhlbHBlcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQThCNUMsTUFBTSxVQUFVLFFBQVEsQ0FDdEIsR0FBb0MsRUFDcEMsRUFBRSxXQUFXLEVBQUUsS0FBSyxLQUF1QixFQUFFO0lBRTdDLE1BQU0sTUFBTSxHQUEyQixFQUFFLENBQUM7SUFDMUMsSUFBSSxXQUFXLElBQUksZUFBZSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ3ZDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNuQztJQUNELEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUU7UUFDdkQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztLQUNyQjtJQUNELE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztBQUMxRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMSB0aGUgb2FrIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgdHlwZSB7IENvbnRleHQgfSBmcm9tIFwiLi9jb250ZXh0LnRzXCI7XG5pbXBvcnQgdHlwZSB7IFJvdXRlckNvbnRleHQgfSBmcm9tIFwiLi9yb3V0ZXIudHNcIjtcbmltcG9ydCB7IGlzUm91dGVyQ29udGV4dCB9IGZyb20gXCIuL3V0aWwudHNcIjtcblxuaW50ZXJmYWNlIEdldFF1ZXJ5T3B0aW9uc0Jhc2Uge1xuICAvKiogVGhlIHJldHVybiB2YWx1ZSBzaG91bGQgYmUgYSBgTWFwYCBpbnN0ZWFkIG9mIGEgcmVjb3JkIG9iamVjdC4gKi9cbiAgYXNNYXA/OiBib29sZWFuO1xuXG4gIC8qKiBNZXJnZSBpbiB0aGUgY29udGV4dCdzIGAucGFyYW1zYC4gIFRoaXMgb25seSB3b3JrcyB3aGVuIGEgYFJvdXRlckNvbnRleHRgXG4gICAqIGlzIHBhc3NlZC4gKi9cbiAgbWVyZ2VQYXJhbXM/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgR2V0UXVlcnlPcHRpb25zQXNNYXAgZXh0ZW5kcyBHZXRRdWVyeU9wdGlvbnNCYXNlIHtcbiAgLyoqIFRoZSByZXR1cm4gdmFsdWUgc2hvdWxkIGJlIGEgYE1hcGAgaW5zdGVhZCBvZiBhIHJlY29yZCBvYmplY3QuICovXG4gIGFzTWFwOiB0cnVlO1xufVxuXG5leHBvcnQgdHlwZSBHZXRQYXJhbXNPcHRpb25zID0gR2V0UXVlcnlPcHRpb25zQmFzZSB8IEdldFF1ZXJ5T3B0aW9uc0FzTWFwO1xuXG4vKiogR2l2ZW4gYSBjb250ZXh0LCByZXR1cm4gdGhlIGAucmVxdWVzdC51cmwuc2VhcmNoUGFyYW1zYCBhcyBhIGBNYXBgIG9mIGtleXNcbiAqIGFuZCB2YWx1ZXMgb2YgdGhlIHBhcmFtcy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVyeShcbiAgY3R4OiBDb250ZXh0IHwgUm91dGVyQ29udGV4dDxzdHJpbmc+LFxuICBvcHRpb25zOiBHZXRRdWVyeU9wdGlvbnNBc01hcCxcbik6IE1hcDxzdHJpbmcsIHN0cmluZz47XG4vKiogR2l2ZW4gYSBjb250ZXh0LCByZXR1cm4gdGhlIGAucmVxdWVzdC51cmwuc2VhcmNoUGFyYW1zYCBhcyBhIHJlY29yZCBvYmplY3RcbiAqIG9mIGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgcGFyYW1zLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5KFxuICBjdHg6IENvbnRleHQgfCBSb3V0ZXJDb250ZXh0PHN0cmluZz4sXG4gIG9wdGlvbnM/OiBHZXRRdWVyeU9wdGlvbnNCYXNlLFxuKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRRdWVyeShcbiAgY3R4OiBDb250ZXh0IHwgUm91dGVyQ29udGV4dDxzdHJpbmc+LFxuICB7IG1lcmdlUGFyYW1zLCBhc01hcCB9OiBHZXRQYXJhbXNPcHRpb25zID0ge30sXG4pOiBNYXA8c3RyaW5nLCBzdHJpbmc+IHwgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gIGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBpZiAobWVyZ2VQYXJhbXMgJiYgaXNSb3V0ZXJDb250ZXh0KGN0eCkpIHtcbiAgICBPYmplY3QuYXNzaWduKHJlc3VsdCwgY3R4LnBhcmFtcyk7XG4gIH1cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgY3R4LnJlcXVlc3QudXJsLnNlYXJjaFBhcmFtcykge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGFzTWFwID8gbmV3IE1hcChPYmplY3QuZW50cmllcyhyZXN1bHQpKSA6IHJlc3VsdDtcbn1cbiJdfQ==