import { log } from '../deps.ts';
import UserService from '../service/userService.ts';
import AccountStatus from '../errors/accountStatus.ts';
export default async (ctx, next) => {
    const user = await UserService.getInstance().getUserById(ctx.state.user._id);
    if (!user.active)
        throw new AccountStatus('Action failed. Please activate your account');
    log.info(`validateUserStatus: ${ctx.state.user._id}`);
    await next();
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGVVc2VyU3RhdHVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidmFsaWRhdGVVc2VyU3RhdHVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBVyxHQUFHLEVBQUUsTUFBTSxZQUFZLENBQUE7QUFDekMsT0FBTyxXQUFXLE1BQU0sMkJBQTJCLENBQUM7QUFDcEQsT0FBTyxhQUFhLE1BQU0sNEJBQTRCLENBQUM7QUFFdkQsZUFBZSxLQUFLLEVBQUUsR0FBWSxFQUFFLElBQTRCLEVBQUUsRUFBRTtJQUNoRSxNQUFNLElBQUksR0FBRyxNQUFNLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDNUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO1FBQUUsTUFBTSxJQUFJLGFBQWEsQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFBO0lBQ3hGLEdBQUcsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFFLENBQUM7SUFDdkQsTUFBTSxJQUFJLEVBQUUsQ0FBQztBQUNqQixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb250ZXh0LCBsb2cgfSBmcm9tICcuLi9kZXBzLnRzJ1xuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2UvdXNlclNlcnZpY2UudHMnO1xuaW1wb3J0IEFjY291bnRTdGF0dXMgZnJvbSAnLi4vZXJyb3JzL2FjY291bnRTdGF0dXMudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoY3R4OiBDb250ZXh0LCBuZXh0OiAoKSA9PiBQcm9taXNlPHVua25vd24+KSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldEluc3RhbmNlKCkuZ2V0VXNlckJ5SWQoY3R4LnN0YXRlLnVzZXIuX2lkKVxuICAgIGlmICghdXNlci5hY3RpdmUpIHRocm93IG5ldyBBY2NvdW50U3RhdHVzKCdBY3Rpb24gZmFpbGVkLiBQbGVhc2UgYWN0aXZhdGUgeW91ciBhY2NvdW50JylcbiAgICBsb2cuaW5mbyhgdmFsaWRhdGVVc2VyU3RhdHVzOiAke2N0eC5zdGF0ZS51c2VyLl9pZH1gLCk7XG4gICAgYXdhaXQgbmV4dCgpO1xufSJdfQ==